import{d as P,a as o,_ as b,i,o as p,b as y,w as u,e as n,g as f,p as d,c as B,F as w,G as S}from"./index-lKMbzYlX.js";const h=10,F=[10,25],$=P({name:"Pagination",props:{path:{required:!0},module:{required:!0},query:{required:!0},updateData:{type:Function,required:!0}},mounted(){this.initParams(),this.updateData().then(e=>{this.updateStats(e)})},data(){let e=this.$route.query;return{defaultPageSize:h,pageSizes:F,page:o(e.page?Number(e.page):1),size:o(e.size?Number(e.size):h),total:o(0),start:o(0),end:o(0)}},methods:{initParams(){let e=this.$route.query;for(const t in this.query)if(this.query.hasOwnProperty(t)&&e[t]){let a=typeof this.query[t];a==="number"||a=="undefined"?this.query[t]=Number(e[t]):this.query[t]=e[t]}},updateUrl(){let e=[];for(const a in this.query)this.query.hasOwnProperty(a)&&this.query[a]&&e.push(a+"="+this.query[a]);this.page!=1&&e.push("page="+this.page),this.size!=h&&e.push("size="+this.size);let t="/"+this.module+"/"+this.path+"?"+e.join("&");this.$router.push(t)},updateStats(e){this.total=e.total,this.start=e.start,this.end=e.end},update(){this.updateUrl()},handlePageChange(e){this.page=e,this.update()},jump(e){let t="/"+this.module;e.startsWith("/")||(t+="/"),t+=e,this.$router.push(t)},clearAll(e=[]){for(const t in this.query)if(!e.includes(t)&&this.query.hasOwnProperty(t)){let a=typeof this.query[t];a==="number"||a=="undefined"?this.query[t]=void 0:this.query[t]=""}}},watch:{$route(e,t){if(e.path==t.path&&JSON.stringify(e.query)!=JSON.stringify(t.query)){let a=e.query;for(const s in this.query)if(this.query.hasOwnProperty(s)){if(this.query[s]==a[s])continue;let l=typeof this.query[s];l==="number"||l=="undefined"?this.query[s]=Number(a[s]):this.query[s]=a[s]}this.updateData().then(s=>{this.updateStats(s)})}}}});function N(e,t,a,s,l,_){const g=i("el-text"),q=i("el-option"),c=i("el-select"),m=i("el-col"),z=i("el-pagination"),C=i("el-row");return p(),y(C,{class:"row-bg",justify:"space-between"},{default:u(()=>[n(m,null,{default:u(()=>[n(g,{size:"small"},{default:u(()=>[f("显示第 "+d(e.start)+" 到第 "+d(e.end)+" 条记录，总共 "+d(e.total)+" 条记录，每页显示 ",1)]),_:1}),n(c,{modelValue:e.size,"onUpdate:modelValue":t[0]||(t[0]=r=>e.size=r),size:"small",style:{width:"60px"},placeholder:e.defaultPageSize.toString(),onChange:e.update},{default:u(()=>[(p(!0),B(w,null,S(e.pageSizes,r=>(p(),y(q,{key:r,label:r,value:r},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","onChange"]),n(g,{size:"small"},{default:u(()=>t[4]||(t[4]=[f(" 条记录")])),_:1})]),_:1}),n(m,{id:"pagination"},{default:u(()=>[n(z,{size:"small",background:"",layout:"prev, pager, next",class:"mt-4","hide-on-single-page":"","pager-count":11,"current-page":e.page,"onUpdate:currentPage":t[1]||(t[1]=r=>e.page=r),total:e.total,"onUpdate:total":t[2]||(t[2]=r=>e.total=r),"page-size":e.size,"onUpdate:pageSize":t[3]||(t[3]=r=>e.size=r),onCurrentChange:e.handlePageChange},null,8,["current-page","total","page-size","onCurrentChange"])]),_:1})]),_:1})}const U=b($,[["render",N]]);export{U as P};
