import{q as R,r as E,u as q,E as c,a as V,_ as P,c as w,e as o,C as U,b as D,w as t,F as v,i as l,D as K,o as s,f as y,g as f,G as S,h as O}from"./index-lKMbzYlX.js";import{B as G}from"./BreadCrumbNav-BtYp_qB0.js";import{p as L}from"./project-CxEimw6o.js";const M="project",d=E({name:"",keyword:"",description:"",owner:""}),p=V(!0),_=V(),g=E([]),T={components:{EditPen:R,BreadCrumbNav:G},setup(){return{loading:p,users:g,formData:d,formDataRef:_,formRules:E({name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{max:50,message:"项目名称不能超过50个字",trigger:"blur"}],description:[{max:200,message:"项目描述不能超过200个字",trigger:"blur"}],keyword:[{required:!0,message:"请输入项目关键字",trigger:"blur"},{max:20,message:"项目关键字不能超过20个字",trigger:"blur"}],owner:[{required:!0,message:"请选择项目负责人",trigger:"blur"}]})}},mounted(){Object.keys(d).forEach(function(u){d[u]=""}),p.value=!0,q.all().then(u=>{g.length=0,Object.assign(g,u),p.value=!1})},methods:{handleSubmit(){try{_.value.validate().then(()=>{L.create(d).then(u=>{u.success?(c.success("添加成功"),_.value.resetFields(),this.$router.push("/"+M+"/list")):c.error("添加失败")})})}catch{c.error("请检查输入内容")}},handleReturn(){this.$router.go(-1)}}},z={class:"card-header"};function H(u,e,I,r,J,m){const h=l("BreadCrumbNav"),k=l("EditPen"),x=l("el-icon"),i=l("el-input"),n=l("el-form-item"),B=l("el-option"),F=l("el-select"),C=l("el-form"),b=l("el-button"),N=l("el-row"),A=l("el-card"),j=K("loading");return s(),w(v,null,[o(h,{"page-paths":["项目管理","项目列表","项目添加"]}),U((s(),D(A,{class:"info-card",shadow:"never"},{header:t(()=>[y("div",z,[o(x,null,{default:t(()=>[o(k)]),_:1}),e[4]||(e[4]=f("  项目添加 "))])]),footer:t(()=>[o(N,{class:"row-bg",justify:"end"},{default:t(()=>[e[7]||(e[7]=y("div",{class:"flex-grow"},null,-1)),o(b,{type:"info",onClick:m.handleReturn,round:""},{default:t(()=>e[5]||(e[5]=[f("返回项目列表")])),_:1},8,["onClick"]),o(b,{type:"primary",onClick:m.handleSubmit,round:""},{default:t(()=>e[6]||(e[6]=[f("提交")])),_:1},8,["onClick"])]),_:1})]),default:t(()=>[o(C,{ref:"formDataRef",model:r.formData,rules:r.formRules,"label-width":"30%",style:{width:"60%"},onKeyup:O(m.handleSubmit,["enter"])},{default:t(()=>[o(n,{label:"项目名称",prop:"name"},{default:t(()=>[o(i,{modelValue:r.formData.name,"onUpdate:modelValue":e[0]||(e[0]=a=>r.formData.name=a)},null,8,["modelValue"])]),_:1}),o(n,{label:"项目关键字",prop:"keyword"},{default:t(()=>[o(i,{modelValue:r.formData.keyword,"onUpdate:modelValue":e[1]||(e[1]=a=>r.formData.keyword=a)},null,8,["modelValue"])]),_:1}),o(n,{label:"项目描述信息",prop:"description"},{default:t(()=>[o(i,{modelValue:r.formData.description,"onUpdate:modelValue":e[2]||(e[2]=a=>r.formData.description=a),type:"textarea",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1}),o(n,{label:"项目负责人",prop:"owner"},{default:t(()=>[o(F,{modelValue:r.formData.owner,"onUpdate:modelValue":e[3]||(e[3]=a=>r.formData.owner=a),placeholder:"请选择...","no-data-text":"暂无用户"},{default:t(()=>[(s(!0),w(v,null,S(r.users,a=>(s(),D(B,{key:a.id,label:a.realName,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules","onKeyup"])]),_:1})),[[j,r.loading]])],64)}const Y=P(T,[["render",H]]);export{Y as default};
